Index: app/src/main/java/com/example/dospex/FirstBook_Activity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.dospex;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.Matrix;\r\nimport android.graphics.pdf.PdfRenderer;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.ParcelFileDescriptor;\r\nimport android.util.DisplayMetrics;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.firebase.crashlytics.buildtools.reloc.org.apache.commons.io.IOUtils;\r\n\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.OutputStream;\r\n\r\npublic class FirstBook_Activity extends AppCompatActivity {\r\n    private String path;\r\n    private ImageView imgView_FirstBook;\r\n    private Button btnPrevious_F1, btnNext_F1;\r\n    private int currentPage = 0;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_first_book);\r\n        if (getSupportActionBar() != null) {\r\n            getSupportActionBar().setDisplayHomeAsUpEnabled(true);\r\n        }\r\n\r\n        try {\r\n            openPdfRenderer();\r\n            displayPage(currentPage);\r\n        } catch (Exception e) {\r\n            Toast.makeText(this, \"PDF-файл защищен паролем.\", Toast.LENGTH_SHORT).show();\r\n        }\r\n\r\n        imgView_FirstBook = findViewById(R.id.imgView_FirstBook);\r\n        btnPrevious_F1 = findViewById(R.id.btnPrevious_F1);\r\n        btnPrevious_F1.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                int index = curPage.getIndex() - 1;\r\n                displayPage(index);\r\n            }\r\n        });\r\n        btnNext_F1 = findViewById(R.id.btnNext_F1);\r\n        btnNext_F1.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                int index = curPage.getIndex() + 1;\r\n                displayPage(index);\r\n            }\r\n        });\r\n    }\r\n\r\n    private PdfRenderer pdfRenderer;\r\n    private PdfRenderer.Page curPage;\r\n    private ParcelFileDescriptor descriptor;\r\n    private float currentZoomLevel = 5;\r\n\r\n    @Override public void onStart() {\r\n        super.onStart();\r\n\r\n    }\r\n\r\n\r\n\r\n    private void openPdfRenderer() {\r\n        File file = new File(\"raw/first.pdf\");\r\n        try(OutputStream outputStream = new FileOutputStream(file)){\r\n            IOUtils.copy(getResources().openRawResource(R.raw.first), outputStream);\r\n        } catch (FileNotFoundException e) {\r\n            // handle exception here\r\n        } catch (IOException e) {\r\n            // handle exception here\r\n        }\r\n        descriptor = null;\r\n        pdfRenderer = null;\r\n        try {\r\n            descriptor = ParcelFileDescriptor.open(file, ParcelFileDescriptor.MODE_READ_ONLY);\r\n            pdfRenderer = new PdfRenderer(descriptor);\r\n        } catch (Exception e) {\r\n            Toast.makeText(this, \"Ошибка\", Toast.LENGTH_LONG).show();\r\n        }\r\n    }\r\n\r\n    private void displayPage(int index) {\r\n        if (pdfRenderer.getPageCount() <= index) return;\r\n        // закрываем текущую страницу\r\n        if (curPage != null) curPage.close();\r\n        // открываем нужную страницу\r\n        curPage = pdfRenderer.openPage(index);\r\n        // определяем размеры Bitmap\r\n        int newWidth = (int) (getResources().getDisplayMetrics().widthPixels * curPage.getWidth() / 72\r\n                * currentZoomLevel / 40);\r\n        int newHeight =\r\n                (int) (getResources().getDisplayMetrics().heightPixels * curPage.getHeight() / 72\r\n                        * currentZoomLevel / 64);\r\n        Bitmap bitmap = Bitmap.createBitmap(newWidth, newHeight, Bitmap.Config.ARGB_8888);\r\n        Matrix matrix = new Matrix();\r\n        float dpiAdjustedZoomLevel = currentZoomLevel * DisplayMetrics.DENSITY_MEDIUM\r\n                / getResources().getDisplayMetrics().densityDpi;\r\n        matrix.setScale(dpiAdjustedZoomLevel, dpiAdjustedZoomLevel);\r\n        curPage.render(bitmap, null, matrix, PdfRenderer.Page.RENDER_MODE_FOR_DISPLAY);\r\n        // отображаем результат рендера\r\n        imgView_FirstBook.setImageBitmap(bitmap);\r\n        // проверяем, нужно ли делать кнопки недоступными\r\n        int pageCount = pdfRenderer.getPageCount();\r\n        btnPrevious_F1.setEnabled(0 != index);\r\n        btnNext_F1.setEnabled(index + 1 < pageCount);\r\n    }\r\n\r\n    @Override protected void onSaveInstanceState(Bundle outState) {\r\n        super.onSaveInstanceState(outState);\r\n        if (curPage != null) {\r\n            outState.putInt(\"currentPage\", curPage.getIndex());\r\n        }\r\n    }\r\n\r\n    @Override public void onDestroy() {\r\n        try {\r\n            closePdfRenderer();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        super.onDestroy();\r\n    }\r\n\r\n    private void closePdfRenderer() throws IOException {\r\n        if (curPage != null) curPage.close();\r\n        if (pdfRenderer != null) pdfRenderer.close();\r\n        if (descriptor != null) descriptor.close();\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/dospex/FirstBook_Activity.java b/app/src/main/java/com/example/dospex/FirstBook_Activity.java
--- a/app/src/main/java/com/example/dospex/FirstBook_Activity.java	(revision 5795c90dc8c30a90220f91f23a5716ad3e86c3aa)
+++ b/app/src/main/java/com/example/dospex/FirstBook_Activity.java	(date 1683503977031)
@@ -74,6 +74,7 @@
 
 
 
+
     private void openPdfRenderer() {
         File file = new File("raw/first.pdf");
         try(OutputStream outputStream = new FileOutputStream(file)){
